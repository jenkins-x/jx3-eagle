# Source: jxboot-helmfile-resources/templates/maven-settings-secret.yaml
apiVersion: kubernetes-client.io/v1
kind: ExternalSecret
metadata:
  name: jenkins-maven-settings
  namespace: jx
  annotations:
    secret.jenkins-x.io/schema-object: '{"name":"jenkins-maven-settings","properties":[{"name":"settings.xml","question":"Maven settings XML contents","help":"This is the maven settings XML which is mounted for Java builds","template":"\u003csettings\u003e\n    \u003clocalRepository\u003e/home/jenkins/.mvnrepository\u003c/localRepository\u003e\n    \u003c!--This sends everything else to /public --\u003e\n{{- if and (hasKey .Requirements \"repository\") (eq .Requirements.repository \"bucketrepo\") }}\n      \u003cmirrors\u003e\n          \u003cmirror\u003e\n              \u003cid\u003ebucketrepo\u003c/id\u003e\n              \u003cname\u003ebucketrepo mirror\u003c/name\u003e\n              \u003cmirrorOf\u003e*\u003c/mirrorOf\u003e\n              \u003curl\u003ehttp://bucketrepo/bucketrepo/\u003c/url\u003e\n          \u003c/mirror\u003e\n        \u003c/mirrors\u003e\n{{- else if and (hasKey .Requirements \"repository\") (eq .Requirements.repository \"none\") }}\n      \u003cmirrors\u003e\n        \u003cmirror\u003e\n          \u003cid\u003ecentral\u003c/id\u003e\n          \u003cname\u003eUS Central\u003c/name\u003e\n          \u003curl\u003ehttps://repo.maven.apache.org/maven2\u003c/url\u003e\n          \u003cmirrorOf\u003ecentral\u003c/mirrorOf\u003e\n        \u003c/mirror\u003e\n        \u003cmirror\u003e\n          \u003cid\u003eUK\u003c/id\u003e\n          \u003cname\u003eUK Central\u003c/name\u003e\n          \u003curl\u003ehttps://uk.maven.org/maven2\u003c/url\u003e\n          \u003cmirrorOf\u003ecentral\u003c/mirrorOf\u003e\n        \u003c/mirror\u003e\n      \u003c/mirrors\u003e\n{{- else }}\n      \u003cmirrors\u003e\n        \u003cmirror\u003e\n            \u003cid\u003enexus\u003c/id\u003e\n            \u003cname\u003enexus mirror\u003c/name\u003e\n            \u003cmirrorOf\u003eexternal:*\u003c/mirrorOf\u003e\n            \u003curl\u003ehttp://nexus/repository/maven-group/\u003c/url\u003e\n        \u003c/mirror\u003e\n      \u003c/mirrors\u003e\n{{- end }}\n\n    \u003c!-- lets disable the download progress indicator that fills up logs --\u003e\n    \u003cinteractiveMode\u003efalse\u003c/interactiveMode\u003e\n\n    \u003cservers\u003e\n        \u003cserver\u003e\n            \u003cid\u003elocal-nexus\u003c/id\u003e\n            \u003cusername\u003e{{ secret \"nexus\" \"username\" | default \"admin\"}}\u003c/username\u003e\n            \u003cpassword\u003e{{ secret \"nexus\" \"password\" }}\u003c/password\u003e\n        \u003c/server\u003e\n        \u003cserver\u003e\n            \u003cid\u003enexus\u003c/id\u003e\n            \u003cusername\u003e{{ secret \"nexus\" \"username\" | default \"admin\"}}\u003c/username\u003e\n            \u003cpassword\u003e{{ secret \"nexus\" \"password\" }}\u003c/password\u003e\n        \u003c/server\u003e\n        \u003cserver\u003e\n            \u003cid\u003echartmuseum\u003c/id\u003e\n            \u003cusername\u003e{{ secret \"jenkins-x-chartmuseum\" \"username\" }}\u003c/username\u003e\n            \u003cpassword\u003e{{ secret \"jenkins-x-chartmuseum\" \"password\" }}\u003c/password\u003e\n        \u003c/server\u003e\n        \u003cserver\u003e\n            \u003cid\u003ebucketrepo\u003c/id\u003e\n            \u003cusername\u003e{{ secret \"jenkins-x-bucketrepo\" \"username\" }}\u003c/username\u003e\n            \u003cpassword\u003e{{ secret \"jenkins-x-bucketrepo\" \"password\" }}\u003c/password\u003e\n        \u003c/server\u003e\n        \u003cserver\u003e\n            \u003cid\u003eoss-sonatype-staging\u003c/id\u003e\n            \u003cusername\u003e{{ secret \"sonatype\" \"username\" }}\u003c/username\u003e\n            \u003cpassword\u003e{{ secret \"sonatype\" \"password\" }}\u003c/password\u003e\n        \u003c/server\u003e\n        \u003cserver\u003e\n            \u003cid\u003edocker.io\u003c/id\u003e\n            \u003cusername\u003e{{ secret \"docker-hub\" \"username\" }}\u003c/username\u003e\n            \u003cpassword\u003e{{ secret \"docker-hub\" \"password\" }}\u003c/password\u003e\n        \u003c/server\u003e\n    \u003c/servers\u003e\n\n    \u003cprofiles\u003e\n        \u003cprofile\u003e\n            \u003cid\u003enexus\u003c/id\u003e\n            \u003cproperties\u003e\n{{- if and (hasKey .Requirements \"repository\") (eq .Requirements.repository \"bucketrepo\") }}\n              \u003caltDeploymentRepository\u003elocal-nexus::default::http://bucketrepo/bucketrepo/deploy/maven-snapshots/\u003c/altDeploymentRepository\u003e\n              \u003caltReleaseDeploymentRepository\u003elocal-nexus::default::http://bucketrepo/bucketrepo/deploy/maven-releases/\u003c/altReleaseDeploymentRepository\u003e\n              \u003caltSnapshotDeploymentRepository\u003elocal-nexus::default::http://bucketrepo/bucketrepo/deploy/maven-snapshots/\u003c/altSnapshotDeploymentRepository\u003e\n{{- else if and (hasKey .Requirements \"repository\") (eq .Requirements.repository \"none\") }}\n{{- else }}\n              \u003caltDeploymentRepository\u003elocal-nexus::default::http://nexus/repository/maven-snapshots/\u003c/altDeploymentRepository\u003e\n              \u003caltReleaseDeploymentRepository\u003elocal-nexus::default::http://nexus/repository/maven-releases/\u003c/altReleaseDeploymentRepository\u003e\n              \u003caltSnapshotDeploymentRepository\u003elocal-nexus::default::http://nexus/repository/maven-snapshots/\u003c/altSnapshotDeploymentRepository\u003e\n{{- end }}\n            \u003c/properties\u003e\n\n            \u003crepositories\u003e\n                \u003crepository\u003e\n                    \u003cid\u003ecentral\u003c/id\u003e\n                    \u003curl\u003ehttp://central\u003c/url\u003e\n                    \u003creleases\u003e\u003cenabled\u003etrue\u003c/enabled\u003e\u003c/releases\u003e\n                    \u003csnapshots\u003e\u003cenabled\u003etrue\u003c/enabled\u003e\u003c/snapshots\u003e\n                \u003c/repository\u003e\n            \u003c/repositories\u003e\n            \u003cpluginRepositories\u003e\n                \u003cpluginRepository\u003e\n                    \u003cid\u003ecentral\u003c/id\u003e\n                    \u003curl\u003ehttp://central\u003c/url\u003e\n                    \u003creleases\u003e\u003cenabled\u003etrue\u003c/enabled\u003e\u003c/releases\u003e\n                    \u003csnapshots\u003e\u003cenabled\u003etrue\u003c/enabled\u003e\u003c/snapshots\u003e\n                \u003c/pluginRepository\u003e\n            \u003c/pluginRepositories\u003e\n        \u003c/profile\u003e\n        \u003cprofile\u003e\n            \u003cid\u003erepo.jenkins-ci.org\u003c/id\u003e\n            \u003cproperties\u003e\n                \u003caltDeploymentRepository\u003erepo.jenkins-ci.org::default::https://repo.jenkins-ci.org/releases/\u003c/altDeploymentRepository\u003e\n                \u003caltReleaseDeploymentRepository\u003erepo.jenkins-ci.org::default::https://repo.jenkins-ci.org/releases/\u003c/altReleaseDeploymentRepository\u003e\n                \u003caltSnapshotDeploymentRepository\u003erepo.jenkins-ci.org::default::https://repo.jenkins-ci.org/snapshots/\u003c/altSnapshotDeploymentRepository\u003e\n            \u003c/properties\u003e\n\n        \u003c/profile\u003e\n        \u003cprofile\u003e\n            \u003cid\u003emaven.jenkins-ci.org\u003c/id\u003e\n            \u003cproperties\u003e\n                \u003caltDeploymentRepository\u003emaven.jenkins-ci.org::default::https://maven.jenkins-ci.org/releases/\u003c/altDeploymentRepository\u003e\n                \u003caltReleaseDeploymentRepository\u003emaven.jenkins-ci.org::default::https://maven.jenkins-ci.org/releases/\u003c/altReleaseDeploymentRepository\u003e\n                \u003caltSnapshotDeploymentRepository\u003emaven.jenkins-ci.org::default::https://maven.jenkins-ci.org/snapshots/\u003c/altSnapshotDeploymentRepository\u003e\n            \u003c/properties\u003e\n\n        \u003c/profile\u003e\n        \u003cprofile\u003e\n            \u003cid\u003erelease\u003c/id\u003e\n            \u003cproperties\u003e\n                \u003cgpg.executable\u003egpg\u003c/gpg.executable\u003e\n                \u003c!-- TODO use: .Parameters.gpg.passphrase when it is always populated --\u003e\n                \u003cgpg.passphrase\u003e{{ secret \"gpg\" \"passphrase\" }}\u003c/gpg.passphrase\u003e\n            \u003c/properties\u003e\n        \u003c/profile\u003e\n    \u003c/profiles\u003e\n\n    \u003cactiveProfiles\u003e\n        \u003cactiveProfile\u003enexus\u003c/activeProfile\u003e\n    \u003c/activeProfiles\u003e\n\u003c/settings\u003e"},{"name":"security.xml","question":"Maven security XML contents","help":"This is the maven security XML which is mounted for Java builds","template":"\u003csettingsSecurity/\u003e"}]}'
  labels:
    gitops.jenkins-x.io/pipeline: 'namespaces'
spec:
  backendType: gcpSecretsManager
  projectId: jx-labs-infra
  data:
    - name: settings.xml
      key: tf-jx-growing-ant-jx-maven-settings
      property: settingsXml
      version: latest
    - name: settings-security.xml
      key: tf-jx-growing-ant-jx-maven-settings
      property: securityXml
      version: latest
  template:
    type: Opaque
    metadata:
      annotations:
        secret.jenkins-x.io/schema-object: '{"name":"jenkins-maven-settings","properties":[{"name":"settings.xml","question":"Maven settings XML contents","help":"This is the maven settings XML which is mounted for Java builds","template":"\u003csettings\u003e\n    \u003clocalRepository\u003e/home/jenkins/.mvnrepository\u003c/localRepository\u003e\n    \u003c!--This sends everything else to /public --\u003e\n{{- if and (hasKey .Requirements \"repository\") (eq .Requirements.repository \"bucketrepo\") }}\n      \u003cmirrors\u003e\n          \u003cmirror\u003e\n              \u003cid\u003ebucketrepo\u003c/id\u003e\n              \u003cname\u003ebucketrepo mirror\u003c/name\u003e\n              \u003cmirrorOf\u003e*\u003c/mirrorOf\u003e\n              \u003curl\u003ehttp://bucketrepo/bucketrepo/\u003c/url\u003e\n          \u003c/mirror\u003e\n        \u003c/mirrors\u003e\n{{- else if and (hasKey .Requirements \"repository\") (eq .Requirements.repository \"none\") }}\n      \u003cmirrors\u003e\n        \u003cmirror\u003e\n          \u003cid\u003ecentral\u003c/id\u003e\n          \u003cname\u003eUS Central\u003c/name\u003e\n          \u003curl\u003ehttps://repo.maven.apache.org/maven2\u003c/url\u003e\n          \u003cmirrorOf\u003ecentral\u003c/mirrorOf\u003e\n        \u003c/mirror\u003e\n        \u003cmirror\u003e\n          \u003cid\u003eUK\u003c/id\u003e\n          \u003cname\u003eUK Central\u003c/name\u003e\n          \u003curl\u003ehttps://uk.maven.org/maven2\u003c/url\u003e\n          \u003cmirrorOf\u003ecentral\u003c/mirrorOf\u003e\n        \u003c/mirror\u003e\n      \u003c/mirrors\u003e\n{{- else }}\n      \u003cmirrors\u003e\n        \u003cmirror\u003e\n            \u003cid\u003enexus\u003c/id\u003e\n            \u003cname\u003enexus mirror\u003c/name\u003e\n            \u003cmirrorOf\u003eexternal:*\u003c/mirrorOf\u003e\n            \u003curl\u003ehttp://nexus/repository/maven-group/\u003c/url\u003e\n        \u003c/mirror\u003e\n      \u003c/mirrors\u003e\n{{- end }}\n\n    \u003c!-- lets disable the download progress indicator that fills up logs --\u003e\n    \u003cinteractiveMode\u003efalse\u003c/interactiveMode\u003e\n\n    \u003cservers\u003e\n        \u003cserver\u003e\n            \u003cid\u003elocal-nexus\u003c/id\u003e\n            \u003cusername\u003e{{ secret \"nexus\" \"username\" | default \"admin\"}}\u003c/username\u003e\n            \u003cpassword\u003e{{ secret \"nexus\" \"password\" }}\u003c/password\u003e\n        \u003c/server\u003e\n        \u003cserver\u003e\n            \u003cid\u003enexus\u003c/id\u003e\n            \u003cusername\u003e{{ secret \"nexus\" \"username\" | default \"admin\"}}\u003c/username\u003e\n            \u003cpassword\u003e{{ secret \"nexus\" \"password\" }}\u003c/password\u003e\n        \u003c/server\u003e\n        \u003cserver\u003e\n            \u003cid\u003echartmuseum\u003c/id\u003e\n            \u003cusername\u003e{{ secret \"jenkins-x-chartmuseum\" \"username\" }}\u003c/username\u003e\n            \u003cpassword\u003e{{ secret \"jenkins-x-chartmuseum\" \"password\" }}\u003c/password\u003e\n        \u003c/server\u003e\n        \u003cserver\u003e\n            \u003cid\u003ebucketrepo\u003c/id\u003e\n            \u003cusername\u003e{{ secret \"jenkins-x-bucketrepo\" \"username\" }}\u003c/username\u003e\n            \u003cpassword\u003e{{ secret \"jenkins-x-bucketrepo\" \"password\" }}\u003c/password\u003e\n        \u003c/server\u003e\n        \u003cserver\u003e\n            \u003cid\u003eoss-sonatype-staging\u003c/id\u003e\n            \u003cusername\u003e{{ secret \"sonatype\" \"username\" }}\u003c/username\u003e\n            \u003cpassword\u003e{{ secret \"sonatype\" \"password\" }}\u003c/password\u003e\n        \u003c/server\u003e\n        \u003cserver\u003e\n            \u003cid\u003edocker.io\u003c/id\u003e\n            \u003cusername\u003e{{ secret \"docker-hub\" \"username\" }}\u003c/username\u003e\n            \u003cpassword\u003e{{ secret \"docker-hub\" \"password\" }}\u003c/password\u003e\n        \u003c/server\u003e\n    \u003c/servers\u003e\n\n    \u003cprofiles\u003e\n        \u003cprofile\u003e\n            \u003cid\u003enexus\u003c/id\u003e\n            \u003cproperties\u003e\n{{- if and (hasKey .Requirements \"repository\") (eq .Requirements.repository \"bucketrepo\") }}\n              \u003caltDeploymentRepository\u003elocal-nexus::default::http://bucketrepo/bucketrepo/deploy/maven-snapshots/\u003c/altDeploymentRepository\u003e\n              \u003caltReleaseDeploymentRepository\u003elocal-nexus::default::http://bucketrepo/bucketrepo/deploy/maven-releases/\u003c/altReleaseDeploymentRepository\u003e\n              \u003caltSnapshotDeploymentRepository\u003elocal-nexus::default::http://bucketrepo/bucketrepo/deploy/maven-snapshots/\u003c/altSnapshotDeploymentRepository\u003e\n{{- else if and (hasKey .Requirements \"repository\") (eq .Requirements.repository \"none\") }}\n{{- else }}\n              \u003caltDeploymentRepository\u003elocal-nexus::default::http://nexus/repository/maven-snapshots/\u003c/altDeploymentRepository\u003e\n              \u003caltReleaseDeploymentRepository\u003elocal-nexus::default::http://nexus/repository/maven-releases/\u003c/altReleaseDeploymentRepository\u003e\n              \u003caltSnapshotDeploymentRepository\u003elocal-nexus::default::http://nexus/repository/maven-snapshots/\u003c/altSnapshotDeploymentRepository\u003e\n{{- end }}\n            \u003c/properties\u003e\n\n            \u003crepositories\u003e\n                \u003crepository\u003e\n                    \u003cid\u003ecentral\u003c/id\u003e\n                    \u003curl\u003ehttp://central\u003c/url\u003e\n                    \u003creleases\u003e\u003cenabled\u003etrue\u003c/enabled\u003e\u003c/releases\u003e\n                    \u003csnapshots\u003e\u003cenabled\u003etrue\u003c/enabled\u003e\u003c/snapshots\u003e\n                \u003c/repository\u003e\n            \u003c/repositories\u003e\n            \u003cpluginRepositories\u003e\n                \u003cpluginRepository\u003e\n                    \u003cid\u003ecentral\u003c/id\u003e\n                    \u003curl\u003ehttp://central\u003c/url\u003e\n                    \u003creleases\u003e\u003cenabled\u003etrue\u003c/enabled\u003e\u003c/releases\u003e\n                    \u003csnapshots\u003e\u003cenabled\u003etrue\u003c/enabled\u003e\u003c/snapshots\u003e\n                \u003c/pluginRepository\u003e\n            \u003c/pluginRepositories\u003e\n        \u003c/profile\u003e\n        \u003cprofile\u003e\n            \u003cid\u003erepo.jenkins-ci.org\u003c/id\u003e\n            \u003cproperties\u003e\n                \u003caltDeploymentRepository\u003erepo.jenkins-ci.org::default::https://repo.jenkins-ci.org/releases/\u003c/altDeploymentRepository\u003e\n                \u003caltReleaseDeploymentRepository\u003erepo.jenkins-ci.org::default::https://repo.jenkins-ci.org/releases/\u003c/altReleaseDeploymentRepository\u003e\n                \u003caltSnapshotDeploymentRepository\u003erepo.jenkins-ci.org::default::https://repo.jenkins-ci.org/snapshots/\u003c/altSnapshotDeploymentRepository\u003e\n            \u003c/properties\u003e\n\n        \u003c/profile\u003e\n        \u003cprofile\u003e\n            \u003cid\u003emaven.jenkins-ci.org\u003c/id\u003e\n            \u003cproperties\u003e\n                \u003caltDeploymentRepository\u003emaven.jenkins-ci.org::default::https://maven.jenkins-ci.org/releases/\u003c/altDeploymentRepository\u003e\n                \u003caltReleaseDeploymentRepository\u003emaven.jenkins-ci.org::default::https://maven.jenkins-ci.org/releases/\u003c/altReleaseDeploymentRepository\u003e\n                \u003caltSnapshotDeploymentRepository\u003emaven.jenkins-ci.org::default::https://maven.jenkins-ci.org/snapshots/\u003c/altSnapshotDeploymentRepository\u003e\n            \u003c/properties\u003e\n\n        \u003c/profile\u003e\n        \u003cprofile\u003e\n            \u003cid\u003erelease\u003c/id\u003e\n            \u003cproperties\u003e\n                \u003cgpg.executable\u003egpg\u003c/gpg.executable\u003e\n                \u003c!-- TODO use: .Parameters.gpg.passphrase when it is always populated --\u003e\n                \u003cgpg.passphrase\u003e{{ secret \"gpg\" \"passphrase\" }}\u003c/gpg.passphrase\u003e\n            \u003c/properties\u003e\n        \u003c/profile\u003e\n    \u003c/profiles\u003e\n\n    \u003cactiveProfiles\u003e\n        \u003cactiveProfile\u003enexus\u003c/activeProfile\u003e\n    \u003c/activeProfiles\u003e\n\u003c/settings\u003e"},{"name":"security.xml","question":"Maven security XML contents","help":"This is the maven security XML which is mounted for Java builds","template":"\u003csettingsSecurity/\u003e"}]}'
