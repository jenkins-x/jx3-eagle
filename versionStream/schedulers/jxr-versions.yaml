apiVersion: gitops.jenkins-x.io/v1alpha1
kind: Scheduler
metadata:
  name: jxr-versions
spec:
  approve:
    issue_required: false
    lgtm_acts_as_approve: true
    require_self_approval: true
  merger:
    blocker_label: ""
    max_goroutines: 0
    merge_method: merge
    policy:
      from-branch-protection: true
      optional-contexts: { }
      required-contexts: { }
      required-if-present-contexts: { }
      skip-unknown-contexts: false
    pr_status_base_url: ""
    squash_label: ""
    target_url: http://deck-jx.{{ .Requirements.ingress.namespaceSubDomain }}{{ .Requirements.ingress.domain }}
  plugins:
    entries:
      - approve
      - assign
      - blunderbuss
      - help
      - hold
      - lgtm
      - lifecycle
      - override
      - size
      - trigger
      - wip
      - heart
      - cat
      - dog
      - pony
  policy:
    protect_tested: true
  postsubmits:
    entries:
      - agent: tekton
        branches:
          - master
        context: ""
        name: release
    replace: true
  presubmits:
    entries:
      - agent: tekton
        always_run: true
        context: gsm
        name: gsm
        pipeline_run_spec:
          pipelineRef:
            name: jx-meta-pipeline
          serviceAccountName: tekton-bot
        report: true
        rerun_command: /test gsm
        trigger: (?m)^/test( all| gsm),?(s+|$)
      - agent: tekton
        always_run: false
        context: ghe
        name: ghe
        pipeline_run_spec:
          pipelineRef:
            name: jx-meta-pipeline
          serviceAccountName: tekton-bot
        report: true
        rerun_command: /test ghe
        trigger: (?m)^/test( all| ghe),?(s+|$)
      - agent: tekton
        always_run: false
        context: istio
        name: istio
        pipeline_run_spec:
          pipelineRef:
            name: jx-meta-pipeline
          serviceAccountName: tekton-bot
        report: true
        rerun_command: /test istio
        trigger: (?m)^/test( all| istio| istio-all),?(s+|$)
      - agent: tekton
        always_run: false
        context: istio-tls
        name: istio-tls
        pipeline_run_spec:
          pipelineRef:
            name: jx-meta-pipeline
          serviceAccountName: tekton-bot
        report: true
        rerun_command: /test istio-tls
        trigger: (?m)^/test( all| istio-tls| istio-all),?(s+|$)
      - agent: tekton
        always_run: false
        context: kube
        name: kube
        pipeline_run_spec:
          pipelineRef:
            name: jx-meta-pipeline
          serviceAccountName: tekton-bot
        report: true
        rerun_command: /test kube
        trigger: (?m)^/test( all| kube),?(s+|$)
      - agent: tekton
        always_run: false
        context: mc
        name: mc
        pipeline_run_spec:
          pipelineRef:
            name: jx-meta-pipeline
          serviceAccountName: tekton-bot
        report: true
        rerun_command: /test mc
        trigger: (?m)^/test( all| mc),?(s+|$)
      - agent: tekton
        always_run: false
        context: remote
        name: remote
        pipeline_run_spec:
          pipelineRef:
            name: jx-meta-pipeline
          serviceAccountName: tekton-bot
        report: true
        rerun_command: /test mc
        trigger: (?m)^/test( all| mc),?(s+|$)
      - agent: tekton
        always_run: false
        context: storage
        name: storage
        pipeline_run_spec:
          pipelineRef:
            name: jx-meta-pipeline
          serviceAccountName: tekton-bot
        report: true
        rerun_command: /test storage
        trigger: (?m)^/test( all| storage),?(s+|$)
      - agent: tekton
        always_run: false
        context: terraform
        name: terraform
        pipeline_run_spec:
          pipelineRef:
            name: jx-meta-pipeline
          serviceAccountName: tekton-bot
        report: true
        rerun_command: /test terraform
        trigger: (?m)^/test( all| terraform),?(s+|$)
      - agent: tekton
        always_run: true
        context: tls
        name: tls
        pipeline_run_spec:
          pipelineRef:
            name: jx-meta-pipeline
          serviceAccountName: tekton-bot
        report: true
        rerun_command: /test tls
        trigger: (?m)^/test( all| tls),?(s+|$)
      - agent: tekton
        always_run: true
        context: vault
        name: vault
        pipeline_run_spec:
          pipelineRef:
            name: jx-meta-pipeline
          serviceAccountName: tekton-bot
        report: true
        rerun_command: /test vault
        trigger: (?m)^/test( default| all| vault),?(s+|$)
    replace: true